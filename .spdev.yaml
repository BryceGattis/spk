version: 0.24.0
release_notes: |
  * Fix bug where solver was not behaving deterministically
    * This was the case in previous versions, but was not caught in the rust transition
  * Update view/info command to respect the --verbose flag and print more information
    about installed packages when provided
  * Update build and make_binary commands to take a -e/--env flag, which will put you
    into the new packages environment immediately after building the first variant
  * Update 'collecting' messages to not be zero-based, and actually reach the end

toolchain:
  - kind: Shell
    variables:
      SENTRY_ENVIRONMENT: development
      PATH: $SPDEV_ENV/bin:$PATH
  - kind: Rust
  - kind: Pipenv

components:
  - kind: PythonPackage
    name: python
    lint:
      black: true
      python3: false
      mypy: true
    test:
      command: $SPDEV_ENV/bin/spfs run - pytest
    install:
      enabled: true
    deploy:
      rez.enabled: false

  - kind: RustCrate
    name: spk

  - kind: HugoDocs
    name: docs
    location: docs

  - kind: RPMPackage
    name: rpm
    spec_file:
      spk.spec
      # bootstrap packages that need to go out with any new features
  - kind: SPKPackage
    name: spk-stdfs
    version: 1.0.0
    spec_file: packages/stdfs/stdfs.spk.yaml
  - kind: SPKPackage
    name: spk-gcc48
    version: 4.8.5
    spec_file: packages/gcc/gcc48.spk.yaml
  - kind: SPKPackage
    name: spk-gcc63
    version: 6.3.1
    spec_file: packages/gcc/gcc63.spk.yaml

  - kind: SentryRelease
    name: sentry
    project: spk
    deploy:
      enabled: true

  - kind: WordpressReleaseNotes
    name: wp-release
    email:
      sender:
        name: SPK Team
