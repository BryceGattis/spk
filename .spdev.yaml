version: 0.18.0
release_notes: |
  Add the ability to use build variables as installation requirements

  Previously, only packages could be added as installation requirements,
  but this ignores the extended compatibility implications of each package's
  defined build options. With this update, you can also add build variables
  to you package's installation requirements. The most immediate example
  of this feature is to allow packages to build against specific python abi and
  unicode widths, eg:

  ```yaml
  build:
    options:
    - pkg: python
  install:
    requirements:
    - pkg: python
      fromBuildEnv: x.x
    - var: python.abi
      fromBuildEnv: true
  ```

toolchain:
  - kind: Shell
    variables:
      SENTRY_ENVIRONMENT: development
      PATH: $SPDEV_ENV/bin:$PATH
  - kind: Pipenv

components:
  - kind: PythonPackage
    name: python
    lint:
      black: true
      python3: false
      mypy: true
    test:
      command: spfs run - pytest
    install:
      enabled: true
    deploy:
      rez.enabled: false

  - kind: HugoDocs
    name: docs
    location: docs

  - kind: RPMPackage
    name: rpm
    spec_file: spk.spec

    # bootstrap packages that need to go out with any new features
  - kind: SPKPackage
    name: spk-stdfs
    version: 1.0.0
    spec_file: packages/stdfs/stdfs.spk.yaml
  - kind: SPKPackage
    name: spk-gcc48
    version: 4.8.5
    spec_file: packages/gcc/gcc48.spk.yaml
  - kind: SPKPackage
    name: spk-gcc63
    version: 6.3.1
    spec_file: packages/gcc/gcc63.spk.yaml

  - kind: SentryRelease
    name: sentry
    project: spk
    deploy:
      enabled: true

  - kind: WordpressReleaseNotes
    name: wp-release
    email:
      sender:
        name: SPK Team
